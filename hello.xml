<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE vxml PUBLIC "-//W3C//DTD VOICEXML 2.1//EN" "http://www.w3.org/TR/2007/REC-voicexml21-20070619/vxml.dtd">

<vxml version="2.1" xmlns="http://www.w3.org/2001/vxml"
	xmlns:voxeo="http://community.voxeo.com/xmlns/vxml" application="root.xml">
    <meta name="maintainer" content="burrelal@gmail.com" />

	<form id="Welcome">
		<block>
			Hi there!
			<goto next="#AskInfo" />
		 </block>
	</form>

    <form id="AskInfo">
		<!-- Uncomment these to avoid caching -->
        <!-- <grammar src="business_grammar.xml#Business" type="application/grammar-xml" maxage="1" />
        <grammar src="location_grammar.xml#Location" type="application/grammar-xml" maxage="1" /> -->
		<grammar src="hello_grammar.xml#Greeting" type="application/grammar-xml" maxage="1" />

		<!-- This is useful for going straight to details.xml, for development -->
        <!-- <block>
            <assign name="application.request_type" expr="'phone'" />
            <assign name="application.business" expr="'safeway'" />
            <assign name="application.location" expr="'santa cruz'" />
			<assign name="application.timezone" expr="-8" />
            <goto next="details.xml#GetDetails" />
        </block> -->

        <initial name="Greeting">
           How can I help you?

            <nomatch count="1">
                I'm sorry, I'm having trouble understanding.
                <assign name="Greeting" expr="true" />
                <reprompt />
            </nomatch>
        </initial>

        <field name="RequestTypeField">
            <grammar src="hello_grammar.xml#RequestType" type="application/grammar-xml" maxage="1" />
            <prompt>
                Do you want hours, an address, or a phone number?
            </prompt>
        </field>

        <field name="BusinessField">
            <grammar src="business_grammar.xml#Business" type="application/grammar-xml" maxage="1" />
            <prompt>
                What business are you wondering about?
            </prompt>

			<nomatch>
				Sorry, I don't know that business. You can try to say it again, or spell the name.
			</nomatch>
        </field>

        <field name="LocationField">
            <grammar src="location_grammar.xml#Location" type="application/grammar-xml" maxage="1" />
            <prompt>
                Where are you?
            </prompt>
        </field>

        <filled mode="all">
        	<assign name="application.request_type" expr="RequestTypeField$.interpretation.RequestTypeField" />
            <assign name="application.business" expr="BusinessField$.interpretation.BusinessField" />
            <assign name="application.location" expr="LocationField$.interpretation.LocationField" />
			<assign name="application.timezone" expr="LocationField$.interpretation.LocationFieldTimezone" />
            <goto next="details.xml#GetDetails" />
        </filled>
    </form>

    <!-- Form to end conversation -->
	<form id="Exit">
		<block>
			<prompt> Goodbye! </prompt>
		</block>
		<exit/>
	</form>

</vxml>
